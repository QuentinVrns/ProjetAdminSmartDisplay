<UserControl x:Class="ProjetAdminSmartDisplay.EcranView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Height="650" Width="870"
             Background="Black">

    <Grid Margin="20">
        <!-- Define main grid layout -->
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Batiment and Etage selection area -->
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Grid.Row="0">
            <ComboBox x:Name="BatimentComboBox"
                      Width="200"
                      DisplayMemberPath="NomBatiment"
                      SelectedValuePath="Id"
                      SelectionChanged="OnBatimentSelectionChanged"
                      Margin="10" />
            <ComboBox x:Name="EtageComboBox"
                      Width="200"
                      DisplayMemberPath="NomEtage"
                      SelectedValuePath="Id"
                      SelectionChanged="OnEtageSelectionChanged"
                      Margin="10" />
        </StackPanel>

        <!-- Dynamic Room selection grid -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Left" Margin="10">
            <ItemsControl x:Name="RoomsControl">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Vertical" Margin="5">
                            <TextBlock Text="{Binding NomSalle}" Foreground="White" HorizontalAlignment="Center"/>
                            <Button Content="Selectionner" 
                                    Width="120" 
                                    Margin="5" 
                                    Foreground="White" 
                                    Background="Orange"
                                    Click="OnRoomSelected_Click"/>
                        </StackPanel>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </StackPanel>

        <!-- Image display area -->
        <StackPanel Grid.Row="2" Margin="10" Orientation="Horizontal">
            <ItemsControl x:Name="ImagesControl">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Grid Margin="10">
                            <Border Background="#FF444444" CornerRadius="10">
                                <Image Source="{Binding ImageSource}" Width="150" Height="150" Stretch="UniformToFill" />

                            </Border>
                            <Button Content="✖" 
                                    Width="24" Height="24" 
                                    HorizontalAlignment="Right" VerticalAlignment="Top"
                                    Click="DeleteImage_Click" 
                                    Background="Red"/>
                        </Grid>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </StackPanel>
    </Grid>
</UserControl>
